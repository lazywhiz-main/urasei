# Urasei - 美学重視開発計画 (Week 3以降)

## 🎭 **設計哲学の確立**

### **核心理念**
```typescript
Uraseiの不変の設計思想
├── 🌌 美学・体験重視を最後まで貫く
├── ✨ 星の聖域システムをさらに発展
├── 🎭 独特な世界観の一貫性強化
├── 🎨 機能追加も宇宙的UIで統一
└── ⭐ 効率性より感動を優先
```

### **タブナビゲーション案の完全破棄**
- 一般的なタブUIは採用しない
- 星の聖域の美学的価値を最大化
- 独自のナビゲーション体験を構築

---

## 🌟 **革新的ナビゲーション設計**

### **星型ナビゲーションシステム (StarNav)**

#### **基本コンセプト**
```typescript
StarNavigation の仕組み
├── 🔮 占い星にいる時: 右上に占い星アニメーション
├── 📝 わるいこ星にいる時: 右上にわるいこ星アニメーション  
├── 📊 記録星にいる時: 右上に記録星アニメーション
├── ⚙️ 設定星にいる時: 右上に設定星アニメーション
└── ⭐ タップで円形メニュー展開
```

#### **円形メニューの動作**
```typescript
StarNav 展開アニメーション
├── 1. 右上の星をタップ
├── 2. 星が中心に移動しながら拡大
├── 3. 他の3つの星が円形に配置されて出現
├── 4. 各星に美しい軌道線を描画
├── 5. 選択した星にワープエフェクト
└── 6. 新しい画面で該当星が右上に配置
```

#### **視覚的特徴**
- **星の脈動**: 現在いる星は特別な脈動アニメーション
- **軌道の描画**: 選択可能な星への美しい軌道線
- **ワープエフェクト**: 星間移動時の宇宙的なパーティクル演出
- **星座の形成**: 4つの星が一時的に星座パターンを描く

---

## 🔮 **占術システム大幅拡張**

### **3つの占術の統合設計**

#### **占い星の内部構造**
```typescript
🔮 占い星 (DivinationStar)
├── 🃏 タロット占い (既存・Week 2完成)
│   ├── 22枚メジャーアルカナ
│   ├── 日毎制限システム
│   └── 美しいカード表示
├── ✨ 占星術 (新規・Week 4-5)
│   ├── 西洋占星術ホロスコープ
│   ├── 12星座・10天体システム
│   └── 日々の星座運勢
└── 🎋 四柱推命 (新規・Week 5-6)
    ├── 天干地支システム
    ├── 五行相生相克理論
    └── 命式自動計算
```

### **占星術システム設計**

#### **必要な技術要素**
```typescript
占星術実装要件
├── 📅 天体位置計算エンジン
│   ├── Ephemeris（暦表）データ
│   ├── 太陽・月・惑星位置計算
│   └── ハウスシステム計算
├── 🌟 ホロスコープ描画
│   ├── 円形チャート生成
│   ├── アスペクトライン表示
│   └── 美しい宇宙的デザイン
├── 🔮 解釈エンジン
│   ├── 惑星サイン解釈
│   ├── ハウス解釈システム
│   └── 日運・月運算出
└── 🎨 Urasei風UI
    ├── 星空背景との統合
    ├── 宇宙的な色彩設計
    └── アニメーション効果
```

#### **データ管理戦略**
```typescript
占星術データ構造
├── 📊 ユーザー出生データ
│   ├── 生年月日時
│   ├── 出生地情報
│   └── 暗号化保存
├── 🌌 天体位置キャッシュ
│   ├── 日毎の天体位置
│   ├── 月間予測データ
│   └── 効率的な計算最適化
└── 📚 解釈テキストDB
    ├── 星座別解釈
    ├── 惑星別解釈
    └── 多言語対応準備
```

### **四柱推命システム設計**

#### **実装要件**
```typescript
四柱推命システム
├── 🎋 干支計算エンジン
│   ├── 十干十二支システム
│   ├── 節気による月柱計算
│   └── 時柱・日柱自動算出
├── 🌊 五行理論実装
│   ├── 木火土金水の相生相克
│   ├── 強弱バランス判定
│   └── 用神選定ロジック
├── �� 命式表示UI
│   ├── 四柱の美しい表示
│   ├── 五行グラフ可視化
│   └── 東洋的な美学デザイン
└── 🔮 運勢計算
    ├── 大運・流年計算
    ├── 日運算出
    └── アドバイス生成
```

#### **UI/UX設計哲学**
```typescript
四柱推命のUraseiデザイン
├── 🏮 東洋的な美学
│   ├── 金色・赤色のアクセント
│   ├── 書道的なフォント使用
│   └── 竹・水墨画的要素
├── 🌌 宇宙との調和
│   ├── 星空背景の継続
│   ├── 五行を星座で表現
│   └── 統一感のある世界観
└── ✨ インタラクティブ体験
    ├── 干支のアニメーション
    ├── 五行の動的変化
    └── タップでの詳細展開
```

---

## 📅 **Week 3-6 詳細ロードマップ**

### **Week 3: StarNav実装期 (Day 15-21)**

#### **Day 15-16: StarNavButton**
- [ ] **右上星表示コンポーネント**
  ```typescript
  StarNavButton.tsx
  ├── 現在いる星の判定
  ├── 星別アニメーション設定
  ├── 美しい脈動エフェクト
  └── タップ検知システム
  ```

#### **Day 17-18: CircularStarMenu**
- [ ] **円形展開メニュー**
  ```typescript
  CircularStarMenu.tsx
  ├── 4つ星の円形配置計算
  ├── スムーズな展開アニメーション
  ├── 軌道線の描画システム
  └── 選択時のワープエフェクト
  ```

#### **Day 19-21: 各画面への統合**
- [ ] **StarNav統合とテスト**
- [ ] **星の聖域の完成度向上**
- [ ] **全体のナビゲーション体験調整**

### **Week 4: 占星術基盤実装 (Day 22-28)**

#### **Day 22-24: 占星術計算エンジン**
- [ ] **天体位置計算ライブラリ選定・実装**
  ```typescript
  候補ライブラリ
  ├── Astronomia (JavaScript)
  ├── Swiss Ephemeris (WASM版)
  └── カスタム計算エンジン
  ```

- [ ] **基本的なホロスコープ計算**
  ```typescript
  AstrologyEngine.ts
  ├── 出生チャート計算
  ├── トランジット計算
  ├── プログレッション計算
  └── アスペクト判定
  ```

#### **Day 25-26: ホロスコープUI**
- [ ] **円形チャート描画システム**
- [ ] **美しい宇宙的デザイン実装**
- [ ] **惑星・星座アイコン制作**

#### **Day 27-28: 基本機能統合**
- [ ] **占い星への占星術追加**
- [ ] **ユーザー設定画面（出生情報）**
- [ ] **初回ホロスコープ表示**

### **Week 5: 四柱推命実装期 (Day 29-35)**

#### **Day 29-31: 四柱推命計算**
- [ ] **干支計算システム**
  ```typescript
  BaziEngine.ts
  ├── 十干十二支変換
  ├── 節気データベース
  ├── 四柱自動計算
  └── 五行バランス判定
  ```

#### **Day 32-33: 命式表示UI**
- [ ] **四柱の美しい表示**
- [ ] **五行グラフの可視化**
- [ ] **東洋的デザイン要素**

#### **Day 34-35: 統合とテスト**
- [ ] **占い星に四柱推命追加**
- [ ] **3つの占術の調和確保**
- [ ] **全体UX調整**

### **Week 6: 完成・最適化期 (Day 36-42)**

#### **Day 36-38: 機能拡張**
- [ ] **日運・月運システム**
- [ ] **記録星での履歴管理強化**
- [ ] **設定星での占術設定**

#### **Day 39-41: 最終調整**
- [ ] **パフォーマンス最適化**
- [ ] **StarNav体験の完成度向上**
- [ ] **全占術の統合品質確保**

#### **Day 42: リリース準備**
- [ ] **最終テスト**
- [ ] **ドキュメント整備**
- [ ] **次フェーズ計画策定**

---

## 🎯 **開発優先度設定**

### **Phase 1: Core Navigation (Week 3)**
1. **StarNavButton** - 最優先
2. **CircularStarMenu** - 高優先
3. **統合テスト** - 必須

### **Phase 2: Astrology (Week 4)**
1. **計算エンジン** - 最優先  
2. **基本UI** - 高優先
3. **統合** - 必須

### **Phase 3: BaZi (Week 5)**
1. **四柱計算** - 最優先
2. **表示UI** - 高優先  
3. **統合** - 必須

### **Phase 4: Polish (Week 6)**
1. **体験品質** - 最優先
2. **パフォーマンス** - 高優先
3. **最終調整** - 必須

---

## 🚀 **技術的実装方針**

### **コンポーネント設計**
```typescript
新規コンポーネント群
├── 📱 Navigation/
│   ├── StarNavButton.tsx
│   ├── CircularStarMenu.tsx
│   └── WarpTransition.tsx
├── 🔮 Astrology/
│   ├── HoroscopeChart.tsx
│   ├── PlanetDisplay.tsx
│   └── AspectLines.tsx
├── 🎋 BaZi/
│   ├── FourPillars.tsx
│   ├── WuXingChart.tsx
│   └── BaziReading.tsx
└── 🌟 Shared/
    ├── StarBackground.tsx (既存)
    ├── CosmicButton.tsx
    └── UniversalTheme.tsx
```

### **データ管理戦略**
```typescript
新しいContexts
├── 🔮 AstrologyContext
│   ├── 出生データ管理
│   ├── ホロスコープキャッシュ
│   └── 日運計算結果
├── 🎋 BaziContext
│   ├── 命式データ
│   ├── 五行バランス
│   └── 運勢情報
└── ⭐ NavigationContext
    ├── 現在の星状態
    ├── StarNav履歴
    └── 遷移アニメーション
```

---

## 🎭 **体験品質指標**

### **StarNav体験指標**
```typescript
目標UX品質
├── ⚡ 応答性: 星タップから展開まで < 300ms
├── 🎨 美観性: 軌道線・ワープエフェクトの完成度
├── 🔄 直感性: 初見でも理解できるナビゲーション
└── ✨ 感動性: 使うたびに感動する美しさ
```

### **占術統合指標**  
```typescript
3占術の調和
├── 🎭 世界観統一: 全て宇宙的デザインで統一
├── 📊 データ連携: 占術間での結果比較可能
├── 🚀 性能: 計算処理 < 2秒、UI応答 < 500ms
└── 🎨 美学継続: Urasei独特の美学を全占術で保持
```

---

## 💎 **想定される課題と対策**

### **技術的課題**
```typescript
主要な技術課題
├── 🔢 天体計算の精度と速度
│   └── 対策: WebAssembly活用 + キャッシュ戦略
├── 📱 アニメーション性能
│   └── 対策: useNativeDriver + 最適化
├── 💾 データ容量管理
│   └── 対策: 段階的ダウンロード + 圧縮
└── 🔮 占術ロジックの正確性
    └── 対策: 専門家監修 + 既存アプリ検証
```

### **UX課題**
```typescript
ユーザー体験の課題
├── 🎓 学習コスト
│   └── 対策: 美しいオンボーディング + ヘルプ
├── ⚡ 複雑性の管理
│   └── 対策: 段階的機能開放 + シンプルUI
├── 🎭 世界観の一貫性
│   └── 対策: 厳格なデザインガイドライン
└── 📱 パフォーマンス
    └── 対策: 最適化とプログレッシブローディング
```

---

## 🌟 **成功定義**

### **Week 6 完了時の成功状態**
```typescript
完成したUrasei
├── 🌌 革新的なStarNavシステム
│   ├── 他にない美しいナビゲーション体験
│   ├── 星の聖域の世界観完全継承
│   └── 直感的で感動的な操作性
├── 🔮 包括的な占術システム
│   ├── タロット・占星術・四柱推命の3本柱
│   ├── 各占術の高い実用性と正確性
│   └── 統一された美しいUI/UX
├── 🎭 独特な世界観の確立
│   ├── 「アプリ」を超えた「体験作品」
│   ├── 競合他社との完全差別化
│   └── ユーザーの心に深く残る記憶
└── 🚀 技術的な完成度
    ├── 安定した性能と応答性
    ├── 美しいアニメーションの実現
    └── 拡張可能な設計
```

この計画により、Uraseiは**単なる占いアプリ**から**神秘的な宇宙体験を提供するアート作品**へと昇華します。 