# 裏星アプリ MVP仕様書

## 🎯 MVPの目標
**「占い×感情浄化」の核心体験を最小構成で提供**
- ユーザーが日常的に使いたくなる体験
- 収益化の基盤となる機能
- 継続的な改善のためのデータ収集

## 📱 MVP機能一覧

### 🔐 認証・プロフィール
- [x] **メール認証サインアップ/ログイン**
  - メールアドレス＋パスワード
  - 初回登録時に基本プロフィール入力
- [x] **占い用プロフィール**
  - 生年月日（必須）
  - 出生時間（任意）
  - 性別（任意）
  - ニックネーム

### 🔮 今日の占い（基本）
- [x] **ワンカードタロット**
  - 22枚の大アルカナから1枚引く
  - 正位置・逆位置の判定
  - 今日の運勢として解釈
  - 1日1回無料（リセット時刻: 4:00AM JST）

### 📝 わるいこノート
- [x] **感情の吐き出し**
  - 自由記述テキストエリア
  - 文字数制限: 500文字
  - 1日何回でも投稿可能
- [x] **わるいこモンスター応答**
  - 基本モンスター「むしゃくん」のみ
  - 共感型の応答（3-4パターン）
  - 投稿後に即座に応答表示
- [x] **浄化エフェクト**
  - 投稿＋応答後に浄化アニメーション
  - 簡単なアファメーション表示
  - 浄化完了の達成感演出

### 💬 占い師との基本対話
- [x] **シンプルな質問機能**
  - 「今日どうだった？」レベルの簡単な対話
  - 占い師キャラクターの基本応答
  - タロット占いとの連携（結果について質問可能）

### 📊 記録・履歴（最小）
- [x] **今日の占い履歴**
  - 引いたカードの表示
  - 過去7日分のみ表示
- [x] **わるいこ投稿履歴**
  - 浄化済みの投稿一覧
  - 過去30日分のみ表示

## 🚫 MVPに含まない機能

### 占い機能
- ❌ 複数枚タロット
- ❌ 占星術
- ❌ 四柱推命
- ❌ 質問に特化した占い

### わるいこ機能
- ❌ 複数モンスター
- ❌ モンスター解放システム
- ❌ 詳細な感情分析

### その他
- ❌ 決済・課金機能
- ❌ プッシュ通知
- ❌ ソーシャル機能
- ❌ 詳細な統計・分析

## 🎨 UIデザイン方針

### デザインシステム
- **ベース**: 提供されたHTMLデザインを参考
- **カラーパレット**: 宇宙・神秘系（紫・ピンク・金）
- **フォント**: 日本語重視、読みやすさ優先
- **アニメーション**: 控えめだが印象的

### 画面構成
```
📱 アプリ構成
├── 🏛️ ホーム（神殿）
│   ├── 今日の占い結果表示
│   ├── わるいこノート投稿数
│   └── アクションボタン（占い・ノート）
├── 🔮 今日の占い
│   ├── カード引き画面
│   ├── 結果表示
│   └── 占い師との対話入口
├── 📝 わるいこノート
│   ├── 投稿画面
│   ├── モンスター応答
│   └── 浄化エフェクト
└── ⭐ 記録
    ├── 占い履歴
    └── ノート履歴
```

## 📊 成功指標（MVP）

### エンゲージメント
- **DAU（日間アクティブユーザー）**: 登録者の20%以上
- **今日の占い実行率**: 60%以上
- **わるいこノート投稿率**: 40%以上
- **リテンション7日**: 30%以上

### ユーザー行動
- **1日平均わるいこ投稿**: 1.5回以上
- **占い結果画面滞在時間**: 30秒以上
- **アプリ滞在時間**: 3分以上

## 🛠️ 技術仕様（MVP）

### フロントエンド
- **React Native 0.73+**
- **TypeScript**
- **React Navigation 6**
- **React Native Reanimated 3**（アニメーション）

### バックエンド
- **Node.js + Express + TypeScript**
- **Supabase**（DB + Auth）
- **OpenAI GPT-4-turbo**（AI応答）

### データモデル（簡略版）
```typescript
// ユーザー
interface User {
  id: string;
  email: string;
  nickname: string;
  birthDate: Date;
  createdAt: Date;
}

// 占いセッション
interface DivinationSession {
  id: string;
  userId: string;
  cardId: number;
  isReversed: boolean;
  result: string;
  createdAt: Date;
}

// わるいこエントリー
interface WaruikoEntry {
  id: string;
  userId: string;
  text: string;
  monsterResponse: string;
  purificationMessage: string;
  createdAt: Date;
}
```

## 🔄 MVP開発スケジュール

### Week 1-2: 基盤構築
- [ ] プロジェクト初期化
- [ ] Supabase環境構築
- [ ] 認証機能実装
- [ ] 基本画面構成

### Week 3-4: コア機能
- [ ] タロット占い機能
- [ ] わるいこノート機能
- [ ] AI応答システム

### Week 5-6: 統合・品質向上
- [ ] 機能統合テスト
- [ ] UIデザイン調整
- [ ] パフォーマンス最適化
- [ ] デバッグ・修正

## 📋 リリース準備チェックリスト

### 機能テスト
- [ ] 全画面の表示・操作確認
- [ ] タロット占いの正常動作
- [ ] わるいこノートの投稿・応答
- [ ] データの保存・読み込み
- [ ] エラーハンドリング

### 品質保証
- [ ] iOS/Android両方での動作確認
- [ ] 様々な画面サイズでの表示確認
- [ ] ネットワーク エラー時の挙動
- [ ] メモリ使用量チェック

### リリース準備
- [ ] アプリストア用アセット準備
- [ ] プライバシーポリシー作成
- [ ] 利用規約作成
- [ ] サポート体制構築

## 💡 MVP後の拡張計画

1. **ユーザーフィードバック収集・分析**
2. **占い機能の拡張**（複数カード、占星術）
3. **わるいこモンスター追加**
4. **プレミアム機能検討**
5. **コミュニティ機能検討** 